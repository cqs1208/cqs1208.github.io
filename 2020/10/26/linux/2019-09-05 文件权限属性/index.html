<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="linux">
<meta property="og:type" content="article">
<meta property="og:title" content="文件权限属性">
<meta property="og:url" content="http://example.com/2020/10/26/linux/2019-09-05%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%B1%9E%E6%80%A7/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="linux">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/images/Linux/Linux_acl1.png">
<meta property="og:image" content="http://example.com/images/Linux/Linux_acl2.png">
<meta property="og:image" content="http://example.com/images/Linux/Linux_acl3.png">
<meta property="og:image" content="http://example.com/images/Linux/Linux_acl4.png">
<meta property="og:image" content="http://example.com/images/Linux/Linux_acl5.png">
<meta property="og:image" content="http://example.com/images/Linux/Linux_acl6.png">
<meta property="article:published_time" content="2020-10-26T03:56:48.241Z">
<meta property="article:modified_time" content="2020-08-11T09:28:29.000Z">
<meta property="article:author" content="QingSong">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/Linux/Linux_acl1.png">

<link rel="canonical" href="http://example.com/2020/10/26/linux/2019-09-05%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%B1%9E%E6%80%A7/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>文件权限属性 | Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">点滴积累 豁达处之</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/10/26/linux/2019-09-05%20%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%B1%9E%E6%80%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar/avatar.png">
      <meta itemprop="name" content="QingSong">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          文件权限属性
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-10-26 11:56:48" itemprop="dateCreated datePublished" datetime="2020-10-26T11:56:48+08:00">2020-10-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-08-11 17:28:29" itemprop="dateModified" datetime="2020-08-11T17:28:29+08:00">2020-08-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
                </span>
            </span>

          
            <div class="post-description">linux</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>权限管理</p>
<a id="more"></a> 

<h2 id="1-文件权限"><a href="#1-文件权限" class="headerlink" title="1 文件权限"></a>1 文件权限</h2><p>我们以/etc/passwd 文件为例，用ll长列出其属性如下所示</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[root@centos6</span> <span class="string">~]# ll /etc/passwd</span></span><br><span class="line"><span class="meta">-rw-r--r--.</span> <span class="string">1 root root 1619 Jan 19 10:39 /etc/passwd</span></span><br></pre></td></tr></table></figure>

<p>–rw–r–r–：代表文件的权限。</p>
<p>1：代表文件的引用计数</p>
<p>root：代表文件所有者</p>
<p>root：代表文件所属组</p>
<p>1619：代表文件大小</p>
<p>Jan 19 10:39：代表文件创建时间</p>
<p>/etc/passwd：代表文件名</p>
<p>每个文件针对每类访问访问者都定义了三种权限 r == 4  w == 2  x == 1</p>
<p>对于文件来说：</p>
<p>r：可以使用文件查看类工具获取其内容</p>
<p>w：可以修改其内容</p>
<p>x：可以执行此文件</p>
<p>对于目录来说：</p>
<p>r：可以使用ls查看此目录中文件列表</p>
<p>w：可以在此目录中创建，删除文件</p>
<p>x：可以使用ls -l查看此目录中文件列表，可以进入此目录</p>
<p>-：代表没有权限</p>
<p>文件类型说明</p>
<p>p表示命名管道文件</p>
<p>d表示目录文件</p>
<p>l表示符号连接文件</p>
<p>-表示普通文件</p>
<p>s表示socket文件</p>
<p>c表示字符设备文件</p>
<p>b表示块设备文件</p>
<h3 id="1-chmod-命令"><a href="#1-chmod-命令" class="headerlink" title="1 chmod 命令"></a>1 chmod 命令</h3><p>chmod命令用来变更文件或目录的权限</p>
<p>权限范围的表示法如下：</p>
<ul>
<li>u   User，即文件或目录的拥有者；</li>
<li>g    Group，即文件或目录的所属群组；</li>
<li>o    Other，除了文件或目录拥有者或所属群组之外，其他用户皆属于这个范围；</li>
<li>a    All，即全部的用户，包含拥有者，所属群组以及其他用户；</li>
<li>s    特殊功能说明：变更文件或目录的权限。</li>
</ul>
<p>语法  ：  chmod(选项)(参数)</p>
<p>选项 </p>
<p>-c：效果类似“-v”参数，但仅回报更改的部分；<br>-f：不显示错误信息；<br>-R：递归处理，将指令目录下的所有文件及子目录一并处理；<br>-v：显示指令执行过程；</p>
<p>示例：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rw-r--r--.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#chmod u+x,g+w file1       //给文件所属人加上执行权限，给文件所属组加上写权限</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rwxrw-r--.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rwxrw-r--.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#chmod u=rwx,g=rwx,o=rw file1   //让文件所属人有全部权限，让文件所属组有全部权限，让其他人对此文件有读写权限</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rwxrwxrw-.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rwxrwxrw-.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#chmod 400 file1                //用数字方式修改文件权限，让只有文件所属人有读取权限，所属组和其他人对文件没有权限</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-r--------.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-r--------.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#chmod u+w file1            //给文件加上权限，这里u+w表示给文件所属人加上写权限，同理g+w表示给所属组叫上写权限，o+w表示给其他人加上些权限</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rw-------.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#chmod a+w file1              //+w前面不跟参数时默认表示给所属人权限位叫上写权限，a+w表示给所有权限位都加上w权限</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rw--w--w-.</span> <span class="string">1 root root 0 Jan 27 17:38 file</span></span><br></pre></td></tr></table></figure>

<h3 id="2-umask"><a href="#2-umask" class="headerlink" title="2 umask"></a>2 umask</h3><p><strong>用途</strong>   预设权限（权限掩码）</p>
<p>我们知道, 当我们建立一个目录或文件时，它都会带一个默认的权限:</p>
<p>​    若使用者建立为 ‘文件’ 则预设 ‘没有可执行 ( x ) 项目’, 亦即只有 rw 这两个项目,  用数字表示就是666或字母 –rw-rw-rw-</p>
<p>​    若使用者建立为 ‘目录’, 则由于 x 与是否可以进入此目录有关, 因此预设为所有权限均开放, 亦即为777 或字母d-rwx-rwx-rwx</p>
<p>​    umask就与这个默认权限有关. 那么 umask 是在搞什么呢？ umask 就是指定 ‘目前用户在建立档案或目录时候的权限默认值’.</p>
<p><strong>用法</strong></p>
<p>1 查看  我们可以这样查看umask默认值</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#umask -S    //以字符形式显示</span></span><br><span class="line"><span class="attr">u</span>=<span class="string">rwx,g=rx,o=rx</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#umask -p    //以数字形式显示（这里我们只看后三位）</span></span><br><span class="line"><span class="attr">umask</span> <span class="string">0022</span></span><br></pre></td></tr></table></figure>

<p>要注意的是，umask 的数字指的是该默认值需要减掉的权限<strong>。</strong></p>
<p>因此，上面的022实际上是去掉了其他用户的写权限，对于文件来说也就是, 实际权限是644即：-rw-r–r-</p>
<p>对于目录来说, 实际是755, 即：-rwxr-xr-x</p>
<p>2 设置    我们可以这样对umask值修改</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#touch file1</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file1 </span></span><br><span class="line"><span class="meta">-rw-r--r--.</span> <span class="string">1 root root 0 Jan 27 17:38 file1</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#umask -p</span></span><br><span class="line"><span class="attr">umask</span> <span class="string">0022</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#umask 002                //umask后跟数字可修改</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#umask -p</span></span><br><span class="line"><span class="attr">umask</span> <span class="string">0002</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#touch file2</span></span><br><span class="line"><span class="meta">[root@localhost</span> <span class="string">app]#ll file2</span></span><br><span class="line"><span class="meta">-rw-rw-r--.</span> <span class="string">1 root root 0 Jan 27 19:16 file2</span></span><br></pre></td></tr></table></figure>

<p>  umask后面接3个数字就可以设定了.我们可以看到本来创建的文件是默认rw-r–r–权限，但修改完umask值后默认权限就变为rw-rw-r– </p>
<p>  但这种修改umask值的方式只是临时修改，若要长期修改umask的值, 可以把它写进/etc/profile或<del>/.profile或</del>/.bash_profile中. </p>
<h3 id="3-chown"><a href="#3-chown" class="headerlink" title="3 chown"></a>3 chown</h3><p>​    chown命令改变某个文件或目录的所有者和所属的组，该命令可以向某个用户授权，使该用户变成指定文件的所有者或者改变文件所属的组。用户可以是用户或者是用户UID，用户组可以是组名或组id。文件名可以使由空格分开的文件列表，在文件名中可以包含通配符。</p>
<p>只有文件主和超级用户才可以便用该命令。</p>
<p>语法 ： chown(选项)(参数)</p>
<p>选项 ：  </p>
<p>-c：效果类似“-v”参数，但仅回报更改的部分；<br>-f：不显示错误信息；<br>-h：只对符号连接的文件作修改，而不更改其他任何相关文件；<br>-R：递归处理，将指定目录下的所有文件及子目录一并处理；<br>-v：显示指令执行过程；<br>–dereference：效果和“-h”参数相同；<br>–help：在线帮助；<br>–reference=&lt;参考文件或目录&gt;：把指定文件或目录的拥有者与所属群组全部设成和参考文件或目录的拥有者与所属群组相同；<br>–version：显示版本信息。</p>
<p>示例：</p>
<p>将目录/usr/meng及其下面的所有文件、子目录的文件所属人改成 liu：</p>
<p>chown -R liu /usr/meng</p>
<h3 id="4-chgrp"><a href="#4-chgrp" class="headerlink" title="4 chgrp"></a>4 chgrp</h3><p>​    chgrp命令用来改变文件或目录所属的用户组。该命令用来改变指定文件所属的用户组。其中，组名可以是用户组的id，也可以是用户组的组名。文件名可以 是由空格分开的要改变属组的文件列表，也可以是由通配符描述的文件集合。如果用户不是该文件的文件主或超级用户(root)，则不能改变该文件的组。</p>
<p>​    在UNIX系统家族里，文件或目录权限的掌控以拥有者及所属群组来管理。您可以使用chgrp指令去变更文件与目录的所属群组，设置方式采用群组名称或群组识别码皆可。</p>
<p>语法  chgrp(选项)(参数)</p>
<p>选项</p>
<p>-c：效果类似“-v”参数，但仅回报更改的部分；<br>-f：不显示错误信息；<br>-h：只对符号连接的文件作修改，而不是该其他任何相关文件；<br>-R：递归处理，将指令目录下的所有文件及子目录一并处理；<br>-v：显示指令执行过程；<br>–reference=&lt;参考文件或目录&gt;：把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同；</p>
<p>实例</p>
<p>将/usr/meng及其子目录下的所有文件的用户组改为mengxin</p>
<p>chgrp -R mengxin /usr/meng</p>
<h3 id="5-stat"><a href="#5-stat" class="headerlink" title="5 stat"></a>5 stat</h3><p><strong>stat命令</strong>用于显示文件的状态信息。stat命令的输出信息比<a target="_blank" rel="noopener" href="http://man.linuxde.net/ls">ls</a>命令的输出信息要更详细。</p>
<p><strong>语法</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat(选项)(参数)</span><br></pre></td></tr></table></figure>

<p><strong>选项</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-L：支持符号连接；</span><br><span class="line">-f：显示文件系统状态而非文件状态；</span><br><span class="line">-t：以简洁方式输出信息；</span><br><span class="line">--help：显示指令的帮助信息；</span><br><span class="line">--version：显示指令的版本信息。</span><br></pre></td></tr></table></figure>

<p><strong>参数</strong></p>
<p>文件：指定要显示信息的普通文件或者文件系统对应的设备文件名。</p>
<p><strong>实例</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ls -l myfile</span><br><span class="line">-rw-r--r-- 1 root root 0 2010-10-09 myfile</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# stat myfile</span><br><span class="line">file: “myfile”</span><br><span class="line">Size: 0               Blocks: 8          IO Block: 4096   一般空文件</span><br><span class="line">Device: fd00h&#x2F;64768d    Inode: 194805815   Links: 1</span><br><span class="line">Access: (0644&#x2F;-rw-r--r--)  Uid: (    0&#x2F;    root)   Gid: (    0&#x2F;    root)</span><br><span class="line">Access: 2010-12-12 12:22:35.000000000 +0800</span><br><span class="line">Modify: 2010-10-09 20:44:21.000000000 +0800</span><br><span class="line">Change: 2010-10-09 20:44:21.000000000 +0800</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# stat -f myfile</span><br><span class="line">File: &quot;myfile&quot;</span><br><span class="line">id: 0        Namelen: 255     type: ext2&#x2F;ext3</span><br><span class="line">Block size: 4096       Fundamental block size: 4096</span><br><span class="line">Blocks: Total: 241555461  free: 232910771  Available: 220442547</span><br><span class="line">Inodes: Total: 249364480  Free: 249139691</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# stat -t myfile</span><br><span class="line">myfile 0 8 81a4 0 0 fd00 194805815 1 0 0 1292127755 1286628261 1286628261 4096</span><br></pre></td></tr></table></figure>

<h3 id="7-acl权限"><a href="#7-acl权限" class="headerlink" title="7 acl权限"></a>7 acl权限</h3><h4 id="1-简介"><a href="#1-简介" class="headerlink" title="1 简介"></a>1 简介</h4><p>给指定的用户指定目录分配指定的权限，就是 ACL 权限分配。</p>
<h4 id="2-查看分区-ACL-权限"><a href="#2-查看分区-ACL-权限" class="headerlink" title="2 查看分区 ACL 权限"></a>2 查看分区 ACL 权限</h4><p>​    我们看某个文件（Linux系统中目录也是文件，一切皆是文件）是否支持 ACL 权限，首先要看文件所在的分区是否支持 ACL 权限。</p>
<p><strong>查看当前系统有哪些分区：df -h</strong></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@izbp12c0zpe8t4yri0xphiz ~]# df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1        <span class="number">40</span>G  <span class="number">8.4</span>G   <span class="number">29</span>G  <span class="number">23</span>% /</span><br><span class="line">devtmpfs        <span class="number">911</span>M     <span class="number">0</span>  <span class="number">911</span>M   <span class="number">0</span>% /dev</span><br><span class="line">tmpfs           <span class="number">920</span>M     <span class="number">0</span>  <span class="number">920</span>M   <span class="number">0</span>% /dev/shm</span><br><span class="line">tmpfs           <span class="number">920</span>M  <span class="number">468</span>K  <span class="number">920</span>M   <span class="number">1</span>% /run</span><br><span class="line">tmpfs           <span class="number">920</span>M     <span class="number">0</span>  <span class="number">920</span>M   <span class="number">0</span>% /sys/fs/cgroup</span><br><span class="line">tmpfs           <span class="number">184</span>M     <span class="number">0</span>  <span class="number">184</span>M   <span class="number">0</span>% /run/user/<span class="number">0</span></span><br><span class="line">overlay          <span class="number">40</span>G  <span class="number">8.4</span>G   <span class="number">29</span>G  <span class="number">23</span>% /<span class="keyword">var</span>/lib/docker/overlay2/merged</span><br><span class="line">[root@izbp12c0zpe8t4yri0xphiz ~]# </span><br></pre></td></tr></table></figure>

<p><strong>查看指定分区详细文件信息：dumpe2fs -h 分区路径</strong></p>
<p>下面是查看 根分区/ 的详细文件信息</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@izbp12c0zpe8t4yri0xphiz ~]# dumpe2fs -h /dev/vdal</span><br><span class="line">dumpe2fs <span class="number">1.42</span>.<span class="number">9</span> (<span class="number">28</span>-Dec-<span class="number">2013</span>)</span><br><span class="line">dumpe2fs: No such file or directory <span class="keyword">while</span> trying to open /dev/vdal</span><br><span class="line">Couldn<span class="string">&#x27;t find valid filesystem superblock.</span></span><br><span class="line"><span class="string">[root@izbp12c0zpe8t4yri0xphiz ~]# dumpe2fs -h /dev/vda1</span></span><br><span class="line"><span class="string">dumpe2fs 1.42.9 (28-Dec-2013)</span></span><br><span class="line"><span class="string">Filesystem volume name:   &lt;none&gt;</span></span><br><span class="line"><span class="string">Last mounted on:          /</span></span><br><span class="line"><span class="string">Filesystem UUID:          eb448abb-3012-4d8d-bcde-94434d586a31</span></span><br><span class="line"><span class="string">Filesystem magic number:  0xEF53</span></span><br><span class="line"><span class="string">Filesystem revision #:    1 (dynamic)</span></span><br><span class="line"><span class="string">Filesystem features:      has_journal ext_attr resize_inode dir_index filetype needs_recovery extent flex_bg sparse_super large_file huge_file uninit_bg dir_nlink extra_isize</span></span><br><span class="line"><span class="string">Filesystem flags:         signed_directory_hash </span></span><br><span class="line"><span class="string">Default mount options:    user_xattr acl      //该出标注acl</span></span><br><span class="line"><span class="string">Filesystem state:         clean</span></span><br><span class="line"><span class="string">Errors behavior:          Continue</span></span><br></pre></td></tr></table></figure>

<h4 id="3-开启分区-ACL-权限"><a href="#3-开启分区-ACL-权限" class="headerlink" title="3 开启分区 ACL 权限"></a>3 开启分区 ACL 权限</h4><p><strong>临时开启分区 ACL 权限</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount,acl /</span><br></pre></td></tr></table></figure>

<p>重新挂载根分区，并挂载加入 acl 权限。注意这种命令开启方式，如果系统重启了，那么根分区权限会恢复到初始状态。</p>
<p><strong>永久开启分区 ACL 权限</strong></p>
<p>1 修改配置文件 /etc/fstab</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line"># /etc/fstab</span><br><span class="line"># Created by anaconda on Sun Oct 15 15:19:00 2017</span><br><span class="line">#</span><br><span class="line"># Accessible filesystems, by reference, are maintained under &#x27;/dev/disk&#x27;</span><br><span class="line"># See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info</span><br><span class="line">#</span><br><span class="line">UUID=eb448abb-<span class="number">3012</span>-<span class="number">4d</span>8d-bcde-<span class="number">94434d</span>586a31 /                       ext4    defaults , acl      <span class="number">1</span> <span class="number">1</span></span><br><span class="line"><span class="comment">// 只需在defaults后面加上  , acl</span></span><br></pre></td></tr></table></figure>

<p>上面是修改根分区拥有 acl 权限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UUID=eb448abb-<span class="number">3012</span>-<span class="number">4d</span>8d-bcde-<span class="number">94434d</span>586a31 /                       ext4    defaults , acl      <span class="number">1</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>2 重新挂载文件系统或重启系统，使得修改生效</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount -o remount /</span><br></pre></td></tr></table></figure>

<h4 id="4-设定-ACL-权限"><a href="#4-设定-ACL-权限" class="headerlink" title="4 设定 ACL 权限"></a>4 设定 ACL 权限</h4><p>选项：</p>
<p>-m     设定acl权限</p>
<p>-x       删除指定的acl权限</p>
<p>-b       删除所有的acl权限</p>
<p>-d       设定默认acl权限</p>
<p>-k       删除默认acl权限</p>
<p>-R       递归设定acl权限</p>
<p>①、给用户设定 ACL 权限：setfacl -m u:用户名:权限 指定文件名</p>
<p>②、给用户组设定 ACL 权限:setfacl -m g:组名:权限 指定文件名</p>
<p>**注意： ** 我们给用户或用户组设定 ACL 权限其实并不是真正我们设定的权限，是与 mask 的权限“相与”之后的权限才是用户的真正权限，一般默认mask权限都是rwx，与我们所设定的权限相与就是我们设定的权限。mask 权限下面我们会详细讲解</p>
<p>​    范例：所有者root用户在根目录下创建一个文件目录/project，然后创建一个QQ群所属组，所属组里面创建两个用户zhangsan和lisi。所有者和所属组权限和其他人权限是770。</p>
<p>然后创建一个旁听用户 pt，给他设定/project目录的 ACL 为 r-x。</p>
<p><img src="/images/Linux/Linux_acl1.png" alt="Linux_acl1"></p>
<p>目录 /project 的所有者和所属组其他人权限设定为 770。接下来我们创建旁听用户 pt，并赋予 acl 权限 rx</p>
<p><img src="/images/Linux/Linux_acl2.png" alt="Linux_acl2"></p>
<p>为了验证 pt 用户对于 /project 目录没有写权限，我们用 su 命令切换到 pt 用户，然后进入 /project 目录，在此目录下创建文件，看是否能成功：</p>
<p><img src="/images/Linux/Linux_acl3.png" alt="Linux_acl3"></p>
<p>　　上面提示权限不够，说明 acl 权限赋予成功，注意如下所示，如果某个目录或文件下有 + 标志，说明其具有 acl 权限。</p>
<p><img src="/images/Linux/Linux_acl4.png" alt="Linux_acl4"></p>
<h4 id="5-查看-ACL-权限"><a href="#5-查看-ACL-权限" class="headerlink" title="5 查看 ACL 权限"></a>5 查看 ACL 权限</h4><p><img src="/images/Linux/Linux_acl5.png" alt="Linux_acl5"></p>
<h4 id="6-最大有效权限-mask"><a href="#6-最大有效权限-mask" class="headerlink" title="6 最大有效权限 mask"></a>6 最大有效权限 mask</h4><p>​    我们给用户或用户组设定 ACL 权限其实并不是真正我们设定的权限，是与 mask 的权限“相与”之后的权限才是用户的真正权限，一般默认mask权限都是rwx，与我们所设定的权限相与就是我们设定的权限。</p>
<p>　　我们通过 getfacl 文件名 也能查看 mask 的权限，那么我们怎么设置呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m m:权限 文件名</span><br></pre></td></tr></table></figure>

<p><img src="/images/Linux/Linux_acl6.png" alt="Linux_acl6"></p>
<h4 id="7-删除-ACL-权限"><a href="#7-删除-ACL-权限" class="headerlink" title="7 删除 ACL 权限"></a>7 删除 ACL 权限</h4><p>①、删除指定用户的 ACL 权限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -x u:用户名 文件名</span><br></pre></td></tr></table></figure>

<p>②、删除指定用户组的 ACL 权限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -x g:组名 文件名</span><br></pre></td></tr></table></figure>

<p>③、删除文件的所有 ACL 权限</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -b 文件名</span><br></pre></td></tr></table></figure>

<h4 id="8-递归-ACL-权限"><a href="#8-递归-ACL-权限" class="headerlink" title="8 递归 ACL 权限"></a>8 递归 ACL 权限</h4><p>　　通过加上选项 -R 递归设定文件的 ACL 权限，所有的子目录和子文件也会拥有相同的 ACL 权限。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m u:用户名:权限 -R 文件名</span><br></pre></td></tr></table></figure>

<h4 id="9-默认-ACL-权限"><a href="#9-默认-ACL-权限" class="headerlink" title="9 默认 ACL 权限"></a>9 默认 ACL 权限</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setfacl -m d:u:用户名:权限 文件名</span><br></pre></td></tr></table></figure>












    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Linux/" rel="tag"># Linux</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/10/26/linux/2019-09-05%20sed/" rel="prev" title="sed">
      <i class="fa fa-chevron-left"></i> sed
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/10/26/linux/2019-09-10%20shell%E8%84%9A%E6%9C%AC%E7%9F%A5%E8%AF%86/" rel="next" title="shell 脚本知识">
      shell 脚本知识 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="nav-number">1.</span> <span class="nav-text">1 文件权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-chmod-%E5%91%BD%E4%BB%A4"><span class="nav-number">1.1.</span> <span class="nav-text">1 chmod 命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-umask"><span class="nav-number">1.2.</span> <span class="nav-text">2 umask</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-chown"><span class="nav-number">1.3.</span> <span class="nav-text">3 chown</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-chgrp"><span class="nav-number">1.4.</span> <span class="nav-text">4 chgrp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-stat"><span class="nav-number">1.5.</span> <span class="nav-text">5 stat</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-acl%E6%9D%83%E9%99%90"><span class="nav-number">1.6.</span> <span class="nav-text">7 acl权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="nav-number">1.6.1.</span> <span class="nav-text">1 简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%9F%A5%E7%9C%8B%E5%88%86%E5%8C%BA-ACL-%E6%9D%83%E9%99%90"><span class="nav-number">1.6.2.</span> <span class="nav-text">2 查看分区 ACL 权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%BC%80%E5%90%AF%E5%88%86%E5%8C%BA-ACL-%E6%9D%83%E9%99%90"><span class="nav-number">1.6.3.</span> <span class="nav-text">3 开启分区 ACL 权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E8%AE%BE%E5%AE%9A-ACL-%E6%9D%83%E9%99%90"><span class="nav-number">1.6.4.</span> <span class="nav-text">4 设定 ACL 权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E6%9F%A5%E7%9C%8B-ACL-%E6%9D%83%E9%99%90"><span class="nav-number">1.6.5.</span> <span class="nav-text">5 查看 ACL 权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-%E6%9C%80%E5%A4%A7%E6%9C%89%E6%95%88%E6%9D%83%E9%99%90-mask"><span class="nav-number">1.6.6.</span> <span class="nav-text">6 最大有效权限 mask</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E5%88%A0%E9%99%A4-ACL-%E6%9D%83%E9%99%90"><span class="nav-number">1.6.7.</span> <span class="nav-text">7 删除 ACL 权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-%E9%80%92%E5%BD%92-ACL-%E6%9D%83%E9%99%90"><span class="nav-number">1.6.8.</span> <span class="nav-text">8 递归 ACL 权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-%E9%BB%98%E8%AE%A4-ACL-%E6%9D%83%E9%99%90"><span class="nav-number">1.6.9.</span> <span class="nav-text">9 默认 ACL 权限</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="QingSong"
      src="/images/avatar/avatar.png">
  <p class="site-author-name" itemprop="name">QingSong</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">183</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">QingSong</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
